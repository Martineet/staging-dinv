(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4402:function(e,t,n){Promise.resolve().then(n.t.bind(n,2778,23)),Promise.resolve().then(n.bind(n,4242))},4242:function(e,t,n){"use strict";n.d(t,{LandingHeader:function(){return d}});var s=n(7437),a=n(2265),r=n(9376),i=n(8734);function o(e){let{isOpen:t,onClose:n}=e,{changePassword:r}=(0,i.a)(),[o,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[d,m]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[g,v]=(0,a.useState)(""),[f,w]=(0,a.useState)(!1),b=()=>{l(""),u(""),m(""),p(""),v(""),w(!1)},x=()=>{b(),n()},j=async()=>{if(p(""),v(""),c.length<6){p("Password must be at least 6 characters.");return}if(c!==d){p("Passwords do not match.");return}if(!o){p("Please enter your current password.");return}w(!0);try{await r(o,c),v("Password updated. Logging out...")}catch(e){p(e instanceof Error?e.message:"Unable to update password."),w(!1)}};return t?(0,s.jsx)("div",{className:"modal-overlay open",onClick:e=>e.currentTarget===e.target&&x(),children:(0,s.jsxs)("div",{className:"modal",children:[(0,s.jsx)("h3",{children:"Change Password"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"currentPassword",children:"Current password"}),(0,s.jsx)("input",{type:"password",id:"currentPassword",value:o,onChange:e=>l(e.target.value),placeholder:"Enter current password",autoComplete:"current-password"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"newPassword",children:"New password"}),(0,s.jsx)("input",{type:"password",id:"newPassword",value:c,onChange:e=>u(e.target.value),placeholder:"At least 6 characters",autoComplete:"new-password"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm new password"}),(0,s.jsx)("input",{type:"password",id:"confirmPassword",value:d,onChange:e=>m(e.target.value),placeholder:"Repeat password",autoComplete:"new-password"})]}),h?(0,s.jsx)("div",{className:"error",children:h}):null,g?(0,s.jsx)("div",{className:"info-msg",children:g}):null,(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{type:"button",className:"btn-secondary",onClick:x,disabled:f,children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:j,disabled:f,children:f?"Saving...":"Save"})]})]})}):null}function l(e){let{onChangePassword:t,onLogout:n}=e,[r,i]=(0,a.useState)(!1),o=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=e=>{o.current&&!o.current.contains(e.target)&&i(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,s.jsxs)("div",{className:"settings-wrapper",ref:o,children:[(0,s.jsx)("button",{type:"button",className:"settings-btn",title:"Settings","aria-label":"Settings",onClick:()=>i(e=>!e),children:"⚙️"}),(0,s.jsxs)("div",{className:"settings-dropdown ".concat(r?"open":""),children:[(0,s.jsx)("button",{type:"button",className:"settings-item",onClick:()=>{i(!1),t()},children:"".concat("\uD83D\uDD11"," Change Password")}),(0,s.jsx)("div",{className:"settings-divider"}),(0,s.jsx)("button",{type:"button",className:"settings-item danger",onClick:()=>{i(!1),n()},children:"".concat("\uD83D\uDEAA"," Logout")})]})]})}var c=n(4086),u=n(1211);function d(){let e=(0,r.useRouter)(),t=(0,r.usePathname)(),{session:n,loading:d,signOut:m}=(0,i.a)(),{price:h}=(0,u.k)(),[p,g]=(0,a.useState)(!1),v=h?"".concat((0,c.fr)(h)," ").concat("€"):"-- ".concat("€");return(0,s.jsxs)("header",{className:"landing-top-nav",role:"banner",children:[(0,s.jsxs)("div",{className:"landing-top-nav-left",children:[(0,s.jsx)("div",{className:"nav-brand-logo","aria-hidden":"true",children:(0,s.jsx)("img",{src:"/log1.png",alt:""})}),(0,s.jsx)("a",{href:"https://www.dinversions.org/",className:"header-title nav-title-link",children:"D.Inversions"}),(0,s.jsx)("div",{id:"headerBtcPrice",className:"header-btc-price",children:v})]}),(0,s.jsx)("div",{className:"landing-top-nav-middle",children:(0,s.jsx)("p",{className:"nav-quote",children:"Bitcoin is building the next global monetary system"})}),(0,s.jsx)("div",{className:"landing-top-nav-right",children:!d&&n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l,{onChangePassword:()=>g(!0),onLogout:()=>m()}),(0,s.jsx)(o,{isOpen:p,onClose:()=>g(!1)})]}):(0,s.jsx)("button",{type:"button",className:"members-zone-btn",onClick:()=>{if("/"!==t){sessionStorage.setItem("open_members_zone","1"),e.push("/");return}window.dispatchEvent(new CustomEvent("open-members-zone"))},children:"Members Zone"})})]})}},8734:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});var s=n(2265),a=n(3475);function r(){var e;let[t,n]=(0,s.useState)(null),[r,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=!0;a.O.auth.getSession().then(t=>{var s;let{data:a}=t;e&&(n(null!==(s=a.session)&&void 0!==s?s:null),i(!1))});let{data:t}=a.O.auth.onAuthStateChange((e,t)=>{n(null!=t?t:null)});return()=>{e=!1,t.subscription.unsubscribe()}},[]);let o=(0,s.useCallback)(async(e,t)=>a.O.auth.signInWithPassword({email:e,password:t}),[]),l=(0,s.useCallback)(async()=>a.O.auth.signOut(),[]),c=(0,s.useCallback)(async(e,t)=>{let{data:n}=await a.O.auth.getUser(),s=n.user;if(!(null==s?void 0:s.email))throw Error("No active session. Please log in again.");let{error:r}=await a.O.auth.signInWithPassword({email:s.email,password:e});if(r)throw r;let{error:i}=await a.O.auth.updateUser({password:t});if(i)throw i;sessionStorage.setItem("pw_changed","1"),await a.O.auth.signOut()},[]);return{session:t,user:null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null,loading:r,signIn:o,signOut:l,changePassword:c}}},1211:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var s=n(2265);async function a(){var e;let t=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=eur");if(!t.ok)throw Error("Failed to fetch BTC price.");let n=await t.json(),s=null==n?void 0:null===(e=n.bitcoin)||void 0===e?void 0:e.eur;if(!s||"number"!=typeof s)throw Error("BTC price data unavailable.");return s}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4,[t,n]=(0,s.useState)(0),[r,i]=(0,s.useState)(!0),[o,l]=(0,s.useState)(null),c=(0,s.useCallback)(async()=>{try{let e=await a();n(e),l(null)}catch(e){l(e instanceof Error?e.message:"Failed to load BTC price.")}finally{i(!1)}},[]);return(0,s.useEffect)(()=>{c();let t=setInterval(c,e);return()=>clearInterval(t)},[c,e]),{price:t,loading:r,error:o,refresh:c}}},4086:function(e,t,n){"use strict";n.d(t,{fr:function(){return i},jl:function(){return o},lb:function(){return r}});let s=new Intl.NumberFormat("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}),a=new Intl.NumberFormat("de-DE",{maximumFractionDigits:0});function r(e){return s.format(e)}function i(e){return a.format(e)}function o(e){return e.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:5})}},3475:function(e,t,n){"use strict";n.d(t,{O:function(){return o}});var s=n(3053),a=n(257);let r=a.env.NEXT_PUBLIC_SUPABASE_URL,i=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!r||!i)throw Error("Missing Supabase environment variables.");let o=(0,s.eI)(r,i)},2778:function(){}},function(e){e.O(0,[461,383,971,117,744],function(){return e(e.s=4402)}),_N_E=e.O()}]);